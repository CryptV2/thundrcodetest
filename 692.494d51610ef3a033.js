(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{8186:function(e,t,r){"use strict";r.d(t,{Q:function(){return s}});var n=r(7294),o=r(1318);let s=e=>{let t=(0,n.useRef)(null),r=(0,n.useRef)({}),s=(0,n.useRef)({}),{getSettings:l}=(0,o.r)(),a=(0,n.useCallback)(()=>{Object.values(s.current).forEach(e=>{e.stop&&e.stop()}),s.current={},t.current&&"closed"!==t.current.state&&t.current.close(),t.current=null,r.current={}},[]);(0,n.useEffect)(()=>(t.current||(t.current=new(window.AudioContext||window.webkitAudioContext)),(async e=>{if(!t.current){console.warn("AudioContext is not initialized. Preloading audio is skipped.");return}let n=e=>new Promise((r,n)=>{t.current.decodeAudioData(e,r,n)});for(let t of e)if(!r.current[t])try{let e=await fetch(t),o=await e.arrayBuffer();r.current[t]=await n(o)}catch(e){console.error("Error preloading audio ".concat(t,":"),e)}})(e),a),[e,a]);let i=(0,n.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=l().volume.master;if(!t.current){console.warn("AudioContext is not initialized. Cannot play sound.");return}let i=r=>{s.current[e]&&s.current[e].stop();let l=t.current.createBufferSource();l.buffer=r,l.loop=o;let i=t.current.createGain();i.gain.value=parseFloat(a/100)*n,l.connect(i),i.connect(t.current.destination),l.start(0),s.current[e]=l,l.onended=()=>{l.loop||delete s.current[e]}},c=r.current[e];c?i(c):(console.warn("Sound not found in cache:",e),fetch(e).then(e=>e.arrayBuffer()).then(e=>t.current.decodeAudioData(e)).then(t=>{r.current[e]=t,i(t)}).catch(e=>{console.error("Error loading audio:",e)}))},[l]),c=(0,n.useCallback)(e=>{s.current[e]&&(s.current[e].stop(),delete s.current[e])},[]),u=(0,n.useCallback)(()=>{Object.keys(s.current).forEach(c)},[c]);return{playSound:i,stopSound:c,stopAllSounds:u}}},6069:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});let n=()=>({currentBoost:()=>{let e=JSON.parse(localStorage.getItem("BoostTokens"))||[],t=Date.now(),r=e.filter(e=>e.expires>t);return r.length>0?r[0]:null},activeBoosts:()=>{let e=JSON.parse(localStorage.getItem("BoostTokens"))||[],t=Date.now();return e.filter(e=>e.expires>t)},allBoosts:()=>JSON.parse(localStorage.getItem("BoostTokens"))||[],saveBoost:e=>{let t=JSON.parse(localStorage.getItem("BoostTokens"))||[];t.some(t=>t.id===e.id)||(t.push(e),localStorage.setItem("BoostTokens",JSON.stringify(t)))},boostLifetime:30})},6692:function(e,t,r){"use strict";r.r(t);var n=r(5893),o=r(6089),s=r(7747),l=r(4e3),a=r(7294),i=r(1163),c=r(7529),u=r(1257),d=r(7570);let f=a.memo(()=>{let e=(0,a.useRef)(null);return(0,a.useEffect)(()=>{window.spinLogo=()=>{e.current&&(e.current.classList.remove("logo_spin1","logo_spin2"),setTimeout(()=>{e.current.classList.add(Math.random()>.5?"logo_spin1":"logo_spin2")},10))}},[]),(0,n.jsx)(o.E,{ref:e,className:Math.random()>.5?"logo_spin1":"logo_spin2",alt:"logo",src:"/assets/logo.png",fallbackSrc:"/assets/logo.png",fallback:(0,n.jsx)(s.xu,{bg:"primary.200",boxSize:{base:34,md:55},borderRadius:"md"}),boxSize:{base:34,md:55},borderRadius:"md"})}),x=a.memo(e=>{let{setMode:t,user_id:r}=e,o=(0,i.useRouter)();return(0,n.jsxs)(s.xu,{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",background:"black",justifyContent:"space-between",p:"2",px:{base:5,md:7},bg:"gray.900",children:[(0,n.jsxs)(s.xu,{onClick:()=>{o.push("/"),window.spinLogo()},display:"flex",flexDirection:"row",alignItems:"center",children:[(0,n.jsx)(f,{}),(0,n.jsx)(l.x,{ml:"3",fontSize:{base:21,md:34},fontWeight:"800",fontStyle:"italic",userSelect:"none",flexDirection:"row",display:"flex",children:"THUNDR.TV"})]}),(0,n.jsxs)(s.xu,{display:"flex",flexDirection:"row",children:[(0,n.jsx)(s.xu,{ml:{base:2,sm:3},children:(0,n.jsx)(d.default,{})}),(0,n.jsx)(s.xu,{ml:{base:2,sm:3},children:(0,n.jsx)(c.default,{})}),(0,n.jsx)(s.xu,{ml:{base:2,sm:3},children:(0,n.jsx)(u.default,{})})]})]})});t.default=x},7529:function(e,t,r){"use strict";r.r(t);var n=r(5893),o=r(7294),s=r(7747),l=r(4225),a=r(4e3),i=r(4295),c=r(1163),u=r(6069),d=r(8186),f=r(4531);let x=o.memo(e=>{let{buyBoostsRef:t}=e,{playSound:r}=(0,d.Q)([]),{currentBoost:f,boostLifetime:x,saveBoost:g}=(0,u.j)(),m=6e4*x,[p,h]=(0,o.useState)(0),b=(0,o.useRef)(null),j=(0,c.useRouter)(),w=(0,o.useCallback)(()=>{let e=f();if(e){let t=Date.now();h(e.expires-t),b.current&&clearInterval(b.current),b.current=setInterval(()=>{h(e=>e<=1e3?(clearInterval(b.current),r("assets/sounds/boostoff.mp3",.5),0):e-1e3)},1e3)}},[f]),y=(0,o.useCallback)(async()=>{let{session_id:e}=j.query;if(e){let t=await fetch("/api/stripe/boosts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:e})});if(t.ok){let e=await t.json();g({token:e.token,expires:e.expires,id:e.id}),w()}}},[j.query,g,w]);return(0,o.useEffect)(()=>(j.isReady&&(w(),y()),()=>{b.current&&clearInterval(b.current)}),[j.isReady]),(0,n.jsxs)(l.z,{px:{base:"5px",md:3},variant:"outline",overflow:"hidden",alignItems:"center",justifyContent:"center",h:{base:"34px",md:"55px"},minW:"0",onClick:()=>{p<=0&&setTimeout(()=>{t.current.open()},0)},children:[(0,n.jsx)(()=>p>0?(0,n.jsx)(s.xu,{flex:"1",className:"boosts-button",position:"absolute",backgroundSize:"contain",backgroundRepeat:"no-repeat",w:"".concat(p/m*100,"%"),left:"0",bottom:"0",alignSelf:"start",justifySelf:"start",h:"3px",zIndex:"1"}):null,{}),(0,n.jsx)(s.xu,{position:"relative",color:"#ffb800",mr:"1",children:(0,n.jsx)(i.LkT,{fontSize:16})}),(0,n.jsx)(a.x,{fontSize:{base:15,md:21},style:{fontWeight:700,textAlign:"left",marginRight:0,zIndex:2},color:p>0?"#fff":"#898989",children:p>0?"".concat(Math.ceil(p/1e3/60),"m"):0})]})});t.default=()=>{let e=(0,o.useRef)(()=>{}),t=(0,o.useRef)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.default,{ref:t}),(0,n.jsx)(x,{buyBoostsRef:t,toggleModal:e})]})}},7570:function(e,t,r){"use strict";r.r(t);var n=r(5893),o=r(4225),s=r(7747),l=r(4e3);r(7294),r(5395),t.default=e=>{let{user_id:t}=e,r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16e3;arguments.length>2&&void 0!==arguments[2]&&arguments[2];let r=3600*new Date().getHours(),n=t-e;return 1e3*Math.round((e+(r<=43200?n*r/43200:n*(1-(r-43200)/43200)))/1e3)};return(0,n.jsxs)(o.z,{variant:"ghost",pointerEvents:"none",h:{base:"34px",md:"55px"},sx:{transition:"none",_hover:{bg:"whiteAlpha.300"}},px:{base:"5px",md:3},children:[(0,n.jsx)(s.xu,{bg:"#00FF5A",style:{width:10,height:10,borderRadius:2,marginBottom:"-1px"},mr:"2"}),(0,n.jsxs)(s.xu,{display:"flex",alignItems:"center",flexDirection:"row",children:[(0,n.jsxs)(l.x,{fontSize:{base:15,md:21},style:{fontWeight:700,textAlign:"left",marginLeft:0,marginRight:0},display:{base:"flex",sm:"none"},children:["".concat(Math.ceil(r()/1e3)),"K+"]}),(0,n.jsxs)(l.x,{fontSize:{base:15,md:21},style:{fontWeight:700,textAlign:"left",marginLeft:0,marginRight:0},display:{base:"none",sm:"flex"},children:["".concat(r().toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),"+"]}),(0,n.jsx)(s.xu,{fontSize:{base:15,md:21},ml:"1.5",fontWeight:"700",display:{base:"none",sm:"flex"},children:"online"})]})]})}},1163:function(e,t,r){e.exports=r(9090)},6089:function(e,t,r){"use strict";r.d(t,{E:function(){return u}});var n=r(6554),o=r(5893),s=(0,n.G)(function(e,t){let{htmlWidth:r,htmlHeight:n,alt:s,...l}=e;return(0,o.jsx)("img",{width:r,height:n,ref:t,alt:s,...l})});s.displayName="NativeImage";var l=r(6245),a=r(7294),i=(e,t)=>"loaded"!==e&&"beforeLoadOrError"===t||"failed"===e&&"onError"===t,c=r(6914),u=(0,n.G)(function(e,t){let{fallbackSrc:r,fallback:n,src:u,srcSet:d,align:f,fit:x,loading:g,ignoreFallback:m,crossOrigin:p,fallbackStrategy:h="beforeLoadOrError",referrerPolicy:b,...j}=e,w=void 0!==r||void 0!==n,y=null!=g||m||!w,k=i(function(e){let{loading:t,src:r,srcSet:n,onLoad:o,onError:s,crossOrigin:i,sizes:c,ignoreFallback:u}=e,[d,f]=(0,a.useState)("pending");(0,a.useEffect)(()=>{f(r?"loading":"pending")},[r]);let x=(0,a.useRef)(),g=(0,a.useCallback)(()=>{if(!r)return;m();let e=new Image;e.src=r,i&&(e.crossOrigin=i),n&&(e.srcset=n),c&&(e.sizes=c),t&&(e.loading=t),e.onload=e=>{m(),f("loaded"),null==o||o(e)},e.onerror=e=>{m(),f("failed"),null==s||s(e)},x.current=e},[r,i,n,c,o,s,t]),m=()=>{x.current&&(x.current.onload=null,x.current.onerror=null,x.current=null)};return(0,l.G)(()=>{if(!u)return"loading"===d&&g(),()=>{m()}},[d,g,u]),u?"loaded":d}({...e,crossOrigin:p,ignoreFallback:y}),h),S={ref:t,objectFit:x,objectPosition:f,...y?j:function(e,t=[]){let r=Object.assign({},e);for(let e of t)e in r&&delete r[e];return r}(j,["onError","onLoad"])};return k?n||(0,o.jsx)(c.m.img,{as:s,className:"chakra-image__placeholder",src:r,...S}):(0,o.jsx)(c.m.img,{as:s,src:u,srcSet:d,crossOrigin:p,loading:g,referrerPolicy:b,className:"chakra-image",...S})});u.displayName="Image"}}]);